---
phase: 03-calendar-ui-public-launch
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - client/package.json
  - client/tailwind.config.js
  - client/postcss.config.js
  - client/src/index.css
  - client/src/components/EventCard.tsx
  - client/src/components/EventList.tsx
autonomous: true
requirements: [DISP-02, DISP-03, DISP-04, INTG-01, INTG-02]

must_haves:
  truths:
    - "User sees all event details: name, date, time, venue, genre, artist(s)"
    - "User sees ticket availability status for each event"
    - "User can click ticket link and be taken to original platform page"
    - "Calendar works on mobile phones (responsive down to 320px)"
    - "Calendar works on tablets and desktop (responsive up to 1920px+)"
  artifacts:
    - path: "client/src/components/EventCard.tsx"
      provides: "Event card with all details and ticket links"
      min_lines: 50
    - path: "client/tailwind.config.js"
      provides: "Tailwind CSS configuration"
      exports: []
    - path: "client/src/index.css"
      provides: "Tailwind imports and global styles"
      min_lines: 5
  key_links:
    - from: "client/src/components/EventList.tsx"
      to: "client/src/components/EventCard.tsx"
      via: "EventCard component import and render"
      pattern: "import.*EventCard.*EventCard"
    - from: "client/src/components/EventCard.tsx"
      to: "ticketSources[0].url"
      via: "Ticket link href"
      pattern: "href=\\{.*ticketSources.*url"
---

<objective>
Add comprehensive event display with mobile-responsive design and ticket platform integration.

Purpose: Transform basic event list into polished, production-ready calendar with full event details, ticket purchase links, and mobile-first responsive design.
Output: Professional event cards showing all required information, clickable ticket links to external platforms, mobile-responsive layout.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-calendar-ui-public-launch/03-RESEARCH.md
@.planning/phases/03-calendar-ui-public-launch/03-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure Tailwind CSS v4</name>
  <files>
    client/package.json
    client/tailwind.config.js
    client/postcss.config.js
    client/src/index.css
  </files>
  <action>
Install Tailwind CSS v4:
```bash
cd client
npm install -D tailwindcss@next postcss autoprefixer
npx tailwindcss init -p
```

Configure `tailwind.config.js`:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

Update `src/index.css` to include Tailwind directives:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global styles */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
```

Verify PostCSS config exists at `postcss.config.js` (created by Tailwind init).

Test Tailwind works by adding `className="text-blue-500"` to a div in App.tsx temporarily, then remove.
  </action>
  <verify>
```bash
cd client
npm run dev
```

Open http://localhost:3000:
- Page loads without CSS errors in console
- Tailwind styles apply (if test class added)
- No "Tailwind CSS is not configured" warnings

Check build:
```bash
npm run build
```

Should complete without errors and generate CSS bundle.
  </verify>
  <done>
- Tailwind CSS v4 installed as dev dependency
- tailwind.config.js configured with content paths
- postcss.config.js exists
- index.css includes Tailwind directives
- Dev server compiles Tailwind styles correctly
- Build process generates optimized CSS
  </done>
</task>

<task type="auto">
  <name>Task 2: Create EventCard component with full event details and ticket links</name>
  <files>
    client/src/components/EventCard.tsx
  </files>
  <action>
Create `client/src/components/EventCard.tsx`:

Import:
- `formatEventDate` from '@/lib/date'
- `EventResponse` type from '@/types/events'

Interface:
```typescript
interface EventCardProps {
  event: EventResponse;
}
```

Component structure:
1. **Container**: `<article>` with Tailwind classes for card styling
   - Border, rounded corners, padding
   - Hover shadow effect
   - Focus-within ring for accessibility

2. **Event name**: `<h3>` with text-lg font-semibold

3. **Artist**: `<p>` with text-sm text-gray-600

4. **Metadata row**: Flexbox with date, venue, genre
   - Use emoji icons: üìÖ for date, üìç for venue, üéµ for genre
   - Each with `aria-label` for screen readers
   - Format date with `formatEventDate(event.date)`
   - Show event.time if available, otherwise rely on formatted date

5. **Price** (if event.price exists): `<p>` with font-medium

6. **Ticket section**:
   - Primary ticket button: First item from `event.ticketSources`
     - `<a>` with `href={primaryTicket.url}`
     - `target="_blank" rel="noopener noreferrer"` for security
     - Blue button styling (bg-blue-600 hover:bg-blue-700)
     - Text: "Buy Tickets on {platform}"
     - `aria-label="Buy tickets on {platform}"`
   - Additional platforms badge (if ticketSources.length > 1):
     - Gray badge showing "+{count} more platform(s)"
     - Not clickable - just informative

Mobile-first responsive classes:
- Base (mobile): flex-col, gap-2, p-4
- sm (640px+): Maintain vertical layout
- md (768px+): Can adjust spacing
- lg (1024px+): Larger padding if needed

Accessibility:
- Use semantic HTML (`<article>` not `<div>`)
- Add aria-labels for icon-prefixed text
- Ensure keyboard focus visible (focus-within:ring-2)
- Color contrast meets WCAG AA (blue-600 on white, gray-700 text)

Pattern: Show primary ticket source prominently, indicate additional platforms without overwhelming UI. Deep links go directly to event page (already provided by API ticketSources.url field).
  </action>
  <verify>
Start dev server:
```bash
cd client
npm run dev
```

Visit http://localhost:3000:
- Each event shows all required fields: name, artist, date/time, venue, genre
- Ticket button displays for events with ticketSources
- Badge shows "+N more platform(s)" when multiple ticket sources exist
- Click ticket button opens new tab to ticket platform (verify URL is event-specific, not homepage)
- Card styling looks polished with proper spacing and borders
- Hover effects work on desktop
- No layout overflow or text cutoff on narrow screens

Test responsive:
- Open DevTools responsive mode
- Test at 320px width (iPhone SE) - card should fit without horizontal scroll
- Test at 768px (tablet) - cards should display properly
- Test at 1920px (desktop) - cards shouldn't stretch too wide

Test accessibility:
- Tab through cards with keyboard - focus ring visible
- Use screen reader (VoiceOver on Mac) - aria-labels read correctly
  </verify>
  <done>
- EventCard component displays all event details (name, artist, venue, date, genre)
- Ticket availability shown via button (when sources exist)
- Ticket button links to original platform with deep link URL
- Additional platforms indicated with badge
- Mobile-responsive from 320px to 1920px+
- Semantic HTML used throughout
- ARIA labels added for accessibility
- Focus states visible for keyboard navigation
- Card styling polished with Tailwind
  </done>
</task>

<task type="auto">
  <name>Task 3: Update EventList to use EventCard and apply responsive layout</name>
  <files>
    client/src/components/EventList.tsx
    client/src/components/SkeletonCard.tsx
  </files>
  <action>
Update `client/src/components/EventList.tsx`:

Replace simple event rendering with EventCard:
- Import EventCard component
- Replace manual card div with: `<EventCard key={event.id} event={event} />`
- Maintain infinite scroll logic (useInView, fetchNextPage)
- Update container to use Tailwind responsive grid/flex:
  - `<div className="flex flex-col gap-4" role="list">`
  - Mobile: Single column with 1rem gap
  - No need for grid - vertical list works best for chronological events

Update loading skeleton section:
- Apply Tailwind classes to match EventCard dimensions
- Loading state: Show 5 SkeletonCards in same container structure

Update empty state:
- Center aligned text in gray
- "No events found" heading
- "Try adjusting your filters" subtext (prep for Plan 03)

Update error state:
- Red background (bg-red-50)
- Red border and text (border-red-200, text-red-800)
- User-friendly message: "Failed to load events. Please try again."

Update scroll trigger:
- Maintain intersection observer ref
- Center loading text
- Gray colors for subtle appearance

Update `client/src/components/SkeletonCard.tsx`:
- Replace inline styles with Tailwind classes
- Match EventCard structure: border, rounded, padding, height
- Use `animate-pulse` for loading animation
- Gray background boxes for text placeholders
- Approximate height of real cards (~200px)

Pattern: Mobile-first vertical list maximizes readability on small screens. Horizontal layouts (grid) work for image-heavy content, but chronological event lists read best top-to-bottom.
  </action>
  <verify>
Start dev server and visit http://localhost:3000:

1. **Initial load:**
   - Skeleton cards appear during fetch
   - Transition to real EventCards smooth

2. **Event display:**
   - All events use new EventCard component
   - Cards show complete details (name, artist, venue, date, genre, tickets)
   - Spacing consistent between cards

3. **Mobile responsive:**
   - Resize to 320px width - cards fit perfectly, no horizontal scroll
   - Content readable on small screens
   - Buttons/links tappable (min 44px height)

4. **Tablet/desktop:**
   - Resize to 768px - cards display properly with comfortable width
   - Resize to 1920px - cards maintain readable width (not stretched full-width)

5. **Interactive elements:**
   - Ticket buttons clickable and open correct URLs
   - Infinite scroll still works - scrolling loads more events
   - Loading indicator appears at bottom during fetch

6. **Error and empty states:**
   - Stop API server - error state displays with red styling
   - Filter to non-existent genre (if filters available) - empty state shows

Open DevTools Console - no errors or warnings.
  </verify>
  <done>
- EventList uses EventCard for all event rendering
- Responsive layout works from 320px to 1920px+
- Skeleton cards match real card styling with Tailwind
- Error states styled with red theme
- Empty states styled with gray theme
- Loading indicators visible during pagination
- Infinite scroll functionality preserved
- All Tailwind classes applied correctly
- No console errors
- Mobile-first responsive design validated
  </done>
</task>

</tasks>

<verification>
Manual verification for all requirements:

**DISP-02 (Event details):**
- [ ] Each event card shows: name, date, time, venue, genre, artist(s)
- [ ] Date/time format readable (from Plan 01 Stockholm formatting)
- [ ] All fields display correctly (no missing data or "[object Object]")

**DISP-03 (Ticket availability):**
- [ ] Events with ticketSources show "Buy Tickets" button
- [ ] Button displays platform name (e.g., "Buy Tickets on Ticketmaster SE")
- [ ] Events with multiple sources show "+N more platform(s)" badge

**DISP-04 (Mobile responsive):**
- [ ] Test at 320px (iPhone SE) - no horizontal scroll, readable text
- [ ] Test at 375px (iPhone 12) - comfortable layout
- [ ] Test at 768px (iPad) - proper spacing
- [ ] Test at 1024px (desktop) - cards don't stretch too wide
- [ ] Test at 1920px (large desktop) - layout remains readable

**INTG-01 (Click through to platform):**
- [ ] Click ticket button on any event
- [ ] New tab opens (target="_blank")
- [ ] URL goes to ticket platform (not generic homepage)

**INTG-02 (Deep links):**
- [ ] Ticket URLs are event-specific (contain event ID, slug, or unique identifier)
- [ ] URLs do NOT just link to platform homepage
- [ ] Verify with multiple events from different platforms

**Accessibility:**
- [ ] Tab through cards with keyboard - focus visible
- [ ] Screen reader announces event details properly
- [ ] Color contrast sufficient (run Chrome Lighthouse)
- [ ] Buttons have adequate touch target size (min 44x44px)

**Performance:**
- [ ] Page loads quickly (< 3s for initial events)
- [ ] Infinite scroll smooth (no jank when loading more)
- [ ] No memory leaks (scroll through 100+ events, check Task Manager)
</verification>

<success_criteria>
Phase complete when:
- [ ] Tailwind CSS v4 installed and configured
- [ ] EventCard component shows all required event fields
- [ ] Ticket buttons link to original platforms with deep links
- [ ] Multiple ticket sources indicated with badge
- [ ] Mobile responsive verified at 320px, 375px, 768px, 1024px, 1920px
- [ ] WCAG 2.1 Level AA color contrast met
- [ ] Semantic HTML and ARIA labels implemented
- [ ] Keyboard navigation functional
- [ ] All requirements DISP-02, DISP-03, DISP-04, INTG-01, INTG-02 validated
</success_criteria>

<output>
After completion, create `.planning/phases/03-calendar-ui-public-launch/03-02-SUMMARY.md` following the summary template.
</output>
