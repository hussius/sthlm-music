---
phase: 04-crawler-expansion-coverage-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - crawl-stampen.js
  - crawl-gamla-enskede-bryggeri.js
  - crawl-reimersholme.js
  - crawl-cirkus.js
  - crawl-berns.js
  - crawl-all.js
  - client/src/components/FilterBar.tsx
autonomous: true
requirements: []

must_haves:
  truths:
    - "Stampen crawler extracts events from stampen.se/program"
    - "Gamla Enskede Bryggeri crawler extracts events from gamlaenskedebryggeri.se/pa-gang/"
    - "Reimersholme crawler extracts events from reimersholmehotel.se/evenemang/"
    - "Cirkus crawler extracts events from cirkus.se/evenemang/"
    - "All new venues visible in FilterBar dropdown"
  artifacts:
    - path: "crawl-stampen.js"
      provides: "Stampen venue crawler using WordPress MEC plugin structure"
    - path: "crawl-gamla-enskede-bryggeri.js"
      provides: "GEB crawler parsing inline text events from raw HTML"
    - path: "crawl-reimersholme.js"
      provides: "Reimersholme crawler using h3>a structure with sibling p date"
    - path: "crawl-cirkus.js"
      provides: "Cirkus crawler with pagination up to 10 pages, Swedish date parsing"
    - path: "crawl-berns.js"
      provides: "Berns crawler stub (yields 0 events — JS-rendered content issue)"
---

<objective>
Add 5 new Stockholm venue crawlers as plain Node.js ESM scripts (crawl-*.js pattern).
Target venues with static HTML parseable by Cheerio + fetch(). Add all venues to
FilterBar and crawl-all.js. Accept Berns as a partial win (JS-rendered, needs future fix).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@crawl-all.js
@client/src/components/FilterBar.tsx
</context>

<tasks>

<task type="auto">
  <name>Add Stampen crawler</name>
  <files>crawl-stampen.js</files>
  <action>
    Create crawl-stampen.js. URL: https://stampen.se/program
    WordPress MEC plugin. Articles with h3.mec-single-title, date regex on article text.
    Parse English-style dates "22 Feb 5:00 pm". Default time 20:00 if not found.
  </action>
  <done>Stampen crawler returns >0 events when run.</done>
</task>

<task type="auto">
  <name>Add Gamla Enskede Bryggeri crawler</name>
  <files>crawl-gamla-enskede-bryggeri.js</files>
  <action>
    Create crawl-gamla-enskede-bryggeri.js. URL: https://gamlaenskedebryggeri.se/pa-gang/
    Events are inline text (not li elements). Replace br/p with newlines, split into
    lines, match "DD/MM EventName" pattern per line. Collect href links for event URLs.
  </action>
  <done>GEB crawler returns >0 events when run.</done>
</task>

<task type="auto">
  <name>Add Reimersholme crawler</name>
  <files>crawl-reimersholme.js</files>
  <action>
    Create crawl-reimersholme.js. URL: https://reimersholmehotel.se/evenemang/
    Structure: h3>a[href*="/event/"] for title, sibling p for date.
    Date format "ons 25 februari Kl. 18:30". Swedish full month names.
  </action>
  <done>Reimersholme crawler returns >0 events when run.</done>
</task>

<task type="auto">
  <name>Add Cirkus crawler</name>
  <files>crawl-cirkus.js</files>
  <action>
    Create crawl-cirkus.js. URL: https://cirkus.se/evenemang/ with /page/N/ pagination.
    Links a[href^="/sv/evenemang/"] that contain a heading. Date in parent container text.
    Swedish abbreviated date "sön22feb" (no spaces due to strong tags).
  </action>
  <done>Cirkus crawler returns >0 events when run.</done>
</task>

<task type="auto">
  <name>Add Berns crawler (stub)</name>
  <files>crawl-berns.js</files>
  <action>
    Create crawl-berns.js. URL: https://berns.se/whats-on
    Attempt static fetch. Structure: a[href*="/calendar/"] with sibling div containing
    heading and p date. Known issue: site content may be JS-rendered, yielding 0 events.
  </action>
  <done>Berns crawler file created and integrated; 0 events acceptable for now.</done>
</task>

<task type="auto">
  <name>Wire up crawl-all.js and FilterBar</name>
  <files>crawl-all.js, client/src/components/FilterBar.tsx</files>
  <action>
    Add all 5 new crawlers to the crawlers array in crawl-all.js.
    Add all 5 venues as option elements in FilterBar.tsx dropdown.
  </action>
  <done>crawl-all.js runs all 5 new crawlers. FilterBar shows all 5 venues.</done>
</task>

</tasks>

<success_criteria>
1. Stampen, GEB, Reimersholme, Cirkus crawlers return >0 events on live runs
2. Berns crawler exists and runs without crashing (0 events acceptable)
3. All 5 venues appear in FilterBar dropdown
4. All 5 crawlers included in crawl-all.js
</success_criteria>

<output>
After completion, create `.planning/phases/04-crawler-expansion-coverage-enhancement/04-01-SUMMARY.md`
</output>
