---
phase: 04-crawler-expansion-coverage-enhancement
plan: 04
type: execute
wave: 3
depends_on: [04-01]
files_modified:
  - src/crawlers/venues/venue-configs.ts
  - src/crawlers/venues/gamla-enskede-bryggeri.ts
  - src/crawlers/venues/cirkus.ts
  - src/crawlers/venues/kraken.ts
  - src/crawlers/venues/alcazar.ts
  - src/crawlers/venues/tranan.ts
  - src/crawlers/venues/index.ts
autonomous: true
requirements: []

must_haves:
  truths:
    - "5 new venue crawlers successfully extract events from live websites"
    - "All venue configurations follow established VenueConfig pattern"
    - "Each crawler returns >0 events or gracefully handles no-event scenarios"
  artifacts:
    - path: "src/crawlers/venues/gamla-enskede-bryggeri.ts"
      provides: "Gamla Enskede Bryggeri crawler"
      exports: ["crawlGamlaEnskedeBryggeri"]
    - path: "src/crawlers/venues/cirkus.ts"
      provides: "Cirkus venue crawler"
      exports: ["crawlCirkus"]
    - path: "src/crawlers/venues/kraken.ts"
      provides: "Kraken venue crawler"
      exports: ["crawlKraken"]
    - path: "src/crawlers/venues/alcazar.ts"
      provides: "Alcazar venue crawler"
      exports: ["crawlAlcazar"]
    - path: "src/crawlers/venues/tranan.ts"
      provides: "Tranan venue crawler"
      exports: ["crawlTranan"]
    - path: "src/crawlers/venues/venue-configs.ts"
      provides: "Updated VENUE_CONFIGS with 5 new venues"
      contains: "VENUE_CONFIGS"
    - path: "src/crawlers/venues/index.ts"
      provides: "Updated exports including new venues"
      exports: ["crawlGamlaEnskedeBryggeri", "crawlCirkus", "crawlKraken", "crawlAlcazar", "crawlTranan"]
  key_links:
    - from: "new venue crawler files"
      to: "src/crawlers/venues/base-venue-crawler.ts"
      via: "VenueConfig import and BaseVenueCrawler instantiation"
      pattern: "new BaseVenueCrawler\\(config\\)"
    - from: "src/crawlers/venues/index.ts"
      to: "individual venue crawlers"
      via: "export aggregation"
      pattern: "export.*from.*\\./(venue-name)"
---

<objective>
Add first batch of 5 new venue crawlers prioritizing venues with simple HTML structure for quick wins.

Purpose: Builds momentum with easy implementations (per user decision: "Prioritize venues by ease of implementation"). Establishes patterns for subsequent venue batches. Depends on 04-01 to ensure VenueConfig pattern validated with fixed crawlers.
Output: 5 working venue crawlers following established patterns.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-crawler-expansion-coverage-enhancement/04-CONTEXT.md
@.planning/phases/01-data-foundation-multi-platform-aggregation/01-06-SUMMARY.md
@.planning/phases/04-crawler-expansion-coverage-enhancement/04-01-SUMMARY.md
@src/crawlers/venues/base-venue-crawler.ts
@src/crawlers/venues/venue-configs.ts
@src/crawlers/venues/index.ts
</context>

<tasks>

<task type="auto">
  <name>Create crawlers for Gamla Enskede Bryggeri, Cirkus, and Kraken</name>
  <files>
    src/crawlers/venues/gamla-enskede-bryggeri.ts
    src/crawlers/venues/cirkus.ts
    src/crawlers/venues/kraken.ts
    src/crawlers/venues/venue-configs.ts
  </files>
  <action>
    Create 3 venue crawlers following the established pattern from 04-01-SUMMARY.

    For each venue:
    1. Research venue website to find events/program page
    2. Inspect HTML structure using Playwright/Cheerio
    3. Identify selectors for event container, name, date, URL
    4. Determine if site requires JavaScript (usesJavaScript flag)
    5. Create venue-specific crawler file (e.g., gamla-enskede-bryggeri.ts) with VenueConfig and crawl function
    6. Add configuration to VENUE_CONFIGS array in venue-configs.ts

    Venue details to discover:
    - Gamla Enskede Bryggeri: Brewery/music venue, likely has events page
    - Cirkus: Large Stockholm concert venue (https://cirkus.se likely)
    - Kraken: Stockholm music venue

    Follow pattern from nalen.ts / kollektivet-livet.ts:
    - Import BaseVenueCrawler and VenueConfig
    - Define config object with venue-specific selectors
    - Export async crawl function returning Promise<{success, failed}>
    - Use normalized venue name matching venue-mappings.ts

    Prioritize simple static sites (usesJavaScript: false) for this batch per "easy wins" strategy.
  </action>
  <verify>
    TypeScript compiles: `npm run build`
    Each crawler loads: `node -e "import('./src/crawlers/venues/gamla-enskede-bryggeri.ts').then(m => console.log('Loaded'))"`
    Test run (may need live site): `node -e "import('./src/crawlers/venues/cirkus.ts').then(m => m.crawlCirkus())"`
  </verify>
  <done>
    3 venue crawler files exist with accurate selectors. VENUE_CONFIGS array includes all 3 venues. Crawlers successfully extract events or gracefully handle no-event scenarios.
  </done>
</task>

<task type="auto">
  <name>Create crawlers for Alcazar and Tranan, update exports</name>
  <files>
    src/crawlers/venues/alcazar.ts
    src/crawlers/venues/tranan.ts
    src/crawlers/venues/venue-configs.ts
    src/crawlers/venues/index.ts
  </files>
  <action>
    Create 2 more venue crawlers and update module exports.

    Venues:
    - Alcazar: Stockholm venue/nightclub with live music
    - Tranan: Restaurant/bar with music events

    Follow same pattern as Task 1:
    1. Research website and locate events page
    2. Inspect HTML structure
    3. Create venue-specific crawler file
    4. Add to VENUE_CONFIGS array
    5. Export from index.ts

    Update src/crawlers/venues/index.ts:
    - Add export statements for all 5 new venues
    - Maintain existing exports (don't break current functionality)
    - Follow alphabetical or logical ordering

    Pattern for index.ts:
    ```typescript
    export { crawlGamlaEnskedeBryggeri } from './gamla-enskede-bryggeri.js';
    export { crawlCirkus } from './cirkus.js';
    // ... etc
    ```

    Ensure crawlAllVenues function includes new venues if it explicitly lists them (or if it dynamically imports from VENUE_CONFIGS, no change needed).
  </action>
  <verify>
    TypeScript compiles: `npm run build`
    Index exports work: `node -e "import('./src/crawlers/venues/index.ts').then(m => console.log(Object.keys(m)))"`
    All 5 new crawlers loadable via index: `node -e "import('./src/crawlers/venues/index.ts').then(m => {console.log(typeof m.crawlCirkus); console.log(typeof m.crawlTranan)})"`
  </verify>
  <done>
    5 venue crawlers complete and exported from index.ts. VENUE_CONFIGS array contains all 5 new venues. Module imports work without errors.
  </done>
</task>

</tasks>

<verification>
Run each new crawler to confirm event extraction:
```bash
node -e "import('./src/crawlers/venues/gamla-enskede-bryggeri.ts').then(m => m.crawlGamlaEnskedeBryggeri())"
node -e "import('./src/crawlers/venues/cirkus.ts').then(m => m.crawlCirkus())"
node -e "import('./src/crawlers/venues/kraken.ts').then(m => m.crawlKraken())"
node -e "import('./src/crawlers/venues/alcazar.ts').then(m => m.crawlAlcazar())"
node -e "import('./src/crawlers/venues/tranan.ts').then(m => m.crawlTranan())"
```

All should report success counts or gracefully handle no-event scenarios.
</verification>

<success_criteria>
1. 5 new venue crawler files created following BaseVenueCrawler pattern
2. Each crawler has accurate selectors matching live website HTML
3. All venues added to VENUE_CONFIGS array
4. All venues exported from index.ts
5. Test runs show successful event extraction (success count >0) or graceful no-event handling
6. TypeScript compilation succeeds without errors
7. Patterns consistent with existing venue crawlers from Phase 1
</success_criteria>

<output>
After completion, create `.planning/phases/04-crawler-expansion-coverage-enhancement/04-04-SUMMARY.md`
</output>
